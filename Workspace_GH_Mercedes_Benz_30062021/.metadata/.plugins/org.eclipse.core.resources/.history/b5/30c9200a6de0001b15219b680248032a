package TestCase;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Point;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.sikuli.script.Pattern;
import org.sikuli.script.Screen;

import Base.BaseSettings;
import Utilities.Utils;

public class ExampleFLuentWait extends BaseSettings{
	
	public static  WebDriver driver;
	public static  WebDriverWait w;
	public static WebElement wb;
	public static Actions act;
	public static Point p;
	public static JavascriptExecutor j;
	public static Pattern p1;
	public static Screen scr;
	

	public static void main(String[] args) {

		driver = ExampleFLuentWait.RunBrowser("Chrome");
		
		Utils u = new Utils(driver);
		
		//Navigate to Yatra Website
		driver.get("https://www.yatra.com/");
		
		//Define the page load timeout
		driver.manage().timeouts().pageLoadTimeout(20L, TimeUnit.SECONDS);
					
		//Implicit wait - Dynamic wait 
		driver.manage().timeouts().implicitlyWait(20L, TimeUnit.SECONDS);
		
		//Handle cookie pop is present
		u.IsPopUpHTMLPresent("//*[@id='themeSnipe']/div/div/div[1]/button");
		//--> //button[@text() = 'Ok,I Agree']
		
		//Click on ONE WAY link
		driver.findElement(By.xpath("//*[@id=\"BE_flight_form_wrapper\"]/div[1]/div[1]/ul[1]/li[1]/a")).click();

		//Click on DEPART FROM Edit Box
		driver.findElement(By.xpath("//*[@id=\"BE_flight_origin_city\"]")).click();
		//Type on DEPART FROM edit box
		driver.findElement(By.xpath("//*[@id=\"BE_flight_origin_city\"]")).sendKeys("Bang");
		
		//Working on Auto-Suggest to choose Bangalore from Drop Down
		String part1 = "//*[@id='BE_flight_form_wrapper']/div[1]/div[2]/ul/li[1]/ul/li[1]/div/div/ul/div/div/div/li[";
		String part2 = "]/div[1]/p[1]";
		int x = 1;
		while(u.isElementPresent(part1+x+part2)) {
			//Expected TExt
			String expectedText = "Bangalore";
			//Actual Text
			String actualText = driver.findElement(By.xpath(part1+x+part2)).getText();
			System.out.println(actualText);
			if(actualText.contains(expectedText)){
				driver.findElement(By.xpath(part1+x+part2)).click();
			}
			
			x = x+1;
		}
		
		
	}

}
